name: "Update Changelog"

on:
  push:
      branches:
        - main

jobs:
  update:
    runs-on: ubuntu-latest

steps:
  - name: Checkout code
    uses: actions/checkout@v3
    with:
      ref: main

  - name: Update Changelog
    uses: stefanzweifel/changelog-updater-action@v1
    with:
      latest-version: ${{ github.event.release.name }}
      release-notes: ${{ github.event.release.body }}

  - name: Commit updated CHANGELOG
    uses: stefanzweifel/git-auto-commit-action@v4
    with:
      branch: main
      commit_message: Update CHANGELOG
      file_pattern: CHANGELOG.md






#
#
#jobs:
#  changelogs:
#    runs-on: ubuntu-latest
#    name: Changelog generator
#
#    steps:
#      - name: Checkout
#        uses: actions/checkout@v2
#      - name: Generate
#        uses: tj-actions/github-changelog-generator@v1.15
#      - name: Move change logs
#        run:  cp /github/workspace/CHANGELOG.md ./CHANGELOG.md
#      - name: Commit change-logs
#        run: |
#          git config --local user.email "github-actions[bot]@users.noreply.github.com"
#          git config --local user.name "github-actions[bot]"
#          git add CHANGELOG.md
#          git commit -m "Generate change logs" -a
#      - name: Push change-logs
#        uses: ad-m/github-push-action@master
#        with:
#          branch: ${{ github.ref }}
#
#
